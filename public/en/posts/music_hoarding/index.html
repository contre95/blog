<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content=""
  />
  
    
      <title>Music Gardening | Contre</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  <link rel="stylesheet" href="/css/font.css"/>
  <link rel="stylesheet" href="/css/smigle.css"/>
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <header>
  <div id="brand">
    <a class="icon-link" href="http://localhost:1313/">
      <img
        class="icon"
        src="/images/img.svg"
      />
    </a>
    <div class="text">
      <a href="http://localhost:1313/"><h1>Contre</h1></a>
      <h3>|||||||||||</h3>
    </div>
  </div>
  <nav>
    
      
        
        <a href="/en"><b>Home</b></a>
      
         | 
        <a href="/en/posts/"><b>Posts</b></a>
      
         | 
        <a href="/en/posts/index.xml"><b>RSS</b></a>
      
         | 
        <a href="/es"><b>Spanish</b></a>
      
    
  </nav>
  <hr />
</header>

    <div id="content">
      
<main>
  <article>
    <h1>Music Gardening</h1>
    <div class="post-meta">
  <strong>
    <span>Posted on</span>
    <time>2025-06-12</time>
    
    
  </strong>
  <span> • 2060 words</span>
  <span> • 10 minute read</span>
  
  
    <div>
      <span>Tags:</span>
      
        <a href="/en/tags/music">Music</a>, 
        <a href="/en/tags/tech">Tech</a>, 
        <a href="/en/tags/self-hosted">Self-Hosted</a>
    </div>
  
</div>

    <div><p><img src="/images/posts/music_banner.en.jpg" alt="Intro"></p>
<p>It must have been around 2009 when I asked my older cousin what kind of music she listened to. That was the first time I clearly associated the idea of a &ldquo;band&rdquo; with &ldquo;song&rdquo;. Up until then, my relationship with music was more through osmosis than personal choice. Later on, I’d come to realize that what I had been listening to was mostly Anglo rock, some blues and some jazz —basically international stuff, kind of disconnected from any local context. I mostly listened to Aspen, a radio station that played (and still plays) soft rock classics from the 80s and 90s, along with a few English ballads and some pop. My dad was the one in charge of the dial, and that shaped a big part of what came into the house: lots of Genesis, Phil Collins, Pink Floyd, Eric Clapton, and other slightly soft-boy bands like Norah Jones, Bossa Nova, and so on, stuff I actually struggle to listen to nowadays. Argentine music came in more through Sumo, some La Bersuit, Soda Sterel and Serú Girán. But it was my friends who introduced me to more contemporary national rock—bands like Árbol, Airbag, and Ataque 77, which played alongside the cumbia and reggaeton hits of the time, like Daddy Yankee, Wisin &amp; Yandel, and other Puerto Rican music.</p>
<p>It was when I got my first computer that I really started choosing what to listen to. My music folder became my first big archive: it was carefully curated, with no room for full albums or songs I didn’t like. The first wave of music came from my memory and from <a href="https://es.wikipedia.org/wiki/Ares_Galaxy">Ares Galaxy</a>. That’s where I downloaded the bands I mentioned earlier. The ones that took the longest to arrive were the songs I used to hear on the radio, those I didn’t know the names of. Many came back nameless, hidden in USB sticks we used to share among friends. I’d only realize if they were familiar once I played them. Later on, apps like <a href="https://play.google.com/store/apps/details?id=com.melodis.midomiMusicIdentifier.freemium&amp;hl=en-US&amp;pli=1">Sound Hound</a> or <a href="https://www.shazam.com/">Shazam</a> helped me categorize them.</p>
<p>Since then, up to today, that same folder has gone through several iterations, not only in variety and quality of content but also in its categorization and organization. It was never accidentally deleted, never lost, and never died; it just mutated. Obscure tracks which were ripped from a CD such as <code>track 3.mp3</code>, were tracked down <a href="https://web.archive.org/web/20051026143257/http://www.affair.de/">in the most hidden places</a> and are now <code>08 Day by Day.mp3</code> by <code>Affair</code> a german band that made 80s like soft rock and still maiktains their flash made website until nowadays (<a href="affair.de">affair.de</a>). The files have been analyzed and edited countless times by programs like <a href="https://www.mp3tag.de/en/">Mp3Tag</a> among others, gone through all sorts of ridiculous TOCs that later caused headaches to fix. Things such as removing Album and Artwork from all songs and replacing them with custom images that matched the color of my <a href="https://www.att.com/support_static_files/manuals/Sony_Ericsson_Z310a.pdf">Sony Ericsson Z310A</a> keyboard. What a pain, seriously!</p>
<h2 id="the-pipeline">The Pipeline</h2>
<p>Nowadays, with services like Spotify, none of that really makes sense anymore, but the soul of that geek hoarder is still alive. The folder is still there, and my idea is to share a bit about how I organize it, stream it, and consume it. From now on, this post is about explaining a bit the image below.</p>
<p><img src="/images/posts/music_pipeline.png" alt=""></p>
<p>As my main source of music, I use various services but mostly <a href="https://www.deezer.com/">Deezer</a>, mainly because it lets me download everything from full albums to individual songs. Its biggest strength is FLAC quality, but that’s not all. It has the advantage—though Deezer itself doesn’t acknowledge it—of having a free software companion that allows downloading its music and other metadata. <a href="https://dee-mix.one/en/download/">Deemix</a> not only downloads the music but also lyrics and other metadata that helps with categorization. Plus, since much of Deezer’s content is also on Spotify, it lets you download entire playlists from Spotify just by using the link. Which is super convenient when your normie friends share music with you.</p>
<p><img src="/images/posts/tags.png" alt=""></p>
<p>Besides Deemix, I also use <a href="https://lidarr.audio/">Lidarr</a> when I want to download a whole album. But its success really depends a lot on which torrent tracker you have configured. I still plan to check out <a href="https://interviewfor.red/en/index.html">Red</a> and see how much better it is compared to what I have now.</p>
<h3 id="hey-whats-playing-">Hey, what&rsquo;s playing ?</h3>
<p>To avoid the endless Google search for our beloved track Day by Day by Affair, nowadays we can rely on the open database <a href="https://musicbrainz.org/">Music Brainz</a>. This is what <a href="https://beets.io/?trk=public_post-text">Beets</a> and <a href="https://picard.musicbrainz.org/">Picard</a> do —they’re kind of like Shazam + MP3Tag. Both help organize and identify songs, but they are fundamentally different. Both tag the metadata of your music files based on various parameters to identify them. The method that works best for me is <a href="https://acoustid.org/">Acoustic ID</a>, which is basically a unique identifier (fingerprint) based on the data in the file. The way this ID is calculated is fascinating. It’s not the goal of this post to explain it in detail, but basically it’s a set of different algorithms that consider everything from frequency changes, mainly between the 12 semitones (not counting the octaves) (i.e. C, C#, D, D#, E, F, F#, G, G#, A, A#, B) to the calculation of <a href="https://www.youtube.com/watch?v=4_SH2nfbQZ8">Mel-Frequency Cepstral Coefficients</a>, which if you liked Calculus III, you’ll probably find interesting. Both Picard and Beets let you configure how you want to organize your music.</p>
<h3 id="where-do-i-place-tchaikovski-ft-the-plasmatics-ep">Where do I place Tchaikovski ft. The Plasmatics EP?</h3>
<p>On one hand, Beets keeps a library of your music in a database and can run as a daemon, importing music as you add it. In my opinion, it’s a bit overhyped, and using it to categorize a large library from scratch can be tedious. The documentation is a bit lacking, so I recommend just checking out <a href="https://github.com/florib779/beets-config/blob/master/config.yaml">this repo</a> for configuration. Picard, on the other hand, is a desktop app with its own UI. I find it useful for a first iteration if your music isn’t categorized yet. Both can move files into whatever folder structure you want. In my case, I use Picard’s default, which I’ve also set in Deemix. The simplified version is:</p>
<p><code>%albumartist%/ %album%/ %tracknumber% %title%</code></p>
<p>But it can definitely get more complex, for example:</p>
<pre tabindex="0"><code>$if2(%albumartist%,%artist%)/
$if(%albumartist%,%album%/,)
$if($gt(%totaldiscs%,1),$if($gt(%totaldiscs%,9),$num(%discnumber%,2),%discnumber%)-,)$if($and(%albumartist%,%tracknumber%),$num(%tracknumber%,2) ,)$if(%_multiartist%,%artist% - ,)%title%
</code></pre><p>Both programs use a variety of services to populate metadata - everything from genres, album art, and artist photos to song lyrics. If you&rsquo;re thinking of diving into this adventure, here&rsquo;s a list of websites where you&rsquo;ll need to create an account and get an API key:</p>
<ul>
<li><a href="https://musicbrainz.org/">https://musicbrainz.org/</a></li>
<li><a href="https://www.last.fm/">https://www.last.fm/</a></li>
<li><a href="https://fanart.tv/">https://fanart.tv/</a></li>
<li><a href="https://www.discogs.com/">https://www.discogs.com/</a></li>
</ul>
<h3 id="backups">Backups</h3>
<p>As of today, the music archive has <code>6,446 folders</code> and <code>15,627 files</code>, including <code>.mp3</code>, <code>.flac</code>, and <code>.lrc</code> —plus the occasional album cover in <code>.jpg</code>. Not everything is in Beets, since the categorization process can be a bit tedious. The creator actually has an interesting take on that: <a href="https://beets.readthedocs.io/en/stable/guides/tagger.html#an-apology-and-a-brief-interlude">An Apology and a Brief Interlude</a>.</p>
<p><img src="/images/posts/music_files.png" alt=""></p>
<p>For backuos, I use <code>rsync</code>, what else? Here&rsquo;s the one-liner if you are interested:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>rsync -avr --delete --ignore-existing --info<span style="color:#f92672">=</span>progress2 /mnt/HDD2/music/ media-bkp/music
</span></span></code></pre></div><h3 id="off-line-is-the-new-luxury">Off-line is the new luxury</h3>
<p>Tangent to the whole music storing and self-hosting thing (<a href="https://www.reddit.com/r/musichoarder">r/musichoarder</a>), there’s also the world of <a href="https://www.reddit.com/r/audiophile">r/audiophile</a>, and since a proper audio setup is not something I can even consider right now, I leaned toward buying a small  <a href="https://www.reddit.com/r/DigitalAudioPlayer">r/DigitalAudioPlayer</a>. I’m not obsessed with quality, but I definitely relate to that deep satisfaction that comes from digging into a specific topic, especially when it’s niche and far from the mainstream. In the words of <a href="https://www.reddit.com/user/Brawntuhsaur/">Brawntuhsaur</a></p>
<blockquote>
<p>The essence of every single hobby is to take minuscule differences and blow them way out of proportion and spend money to experience those differences that you’ve convinced yourself are huge differences.</p>
<p><em>(</em><a href="https://www.reddit.com/r/audiophile/comments/1l4vdnl/comment/mwc1duf/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button"><em>ref. to the comment</em></a><em>)</em></p></blockquote>
<p>After doing some research —mostly through Reddit and other shady corners of the internet— I ended up buying a modded iPod Classic. I’m not going to go into detail about what you need to mod an iPod, but in case anyone wants to give it a shot, here’s a link where you can get everything you need to build an iPod that meets the standards expected of a DAP in 2025. The main reason I went with an iPod was <a href="http://rockbox.org">RockBox</a>, a replacement for the stock OS that lets you play <code>.flac</code> files, run Lua scripts, and customize it with a <a href="https://themes.rockbox.org/index.php?target=ipod6g">huge selection of themes</a>. And yes, it also runs Doom.</p>
<p>If you’re thinking about buying a DAP, let me just say there are way better options out there, with better sound quality and at lower prices. But most of them run Android, or some modded version of it.</p>
<p><img src="/images/posts/ipod.png" alt=""></p>
<p>To deal with how impractical it can be to manually load music onto it, I put together a sort of automation setup that I’ll share here. Basically, the solution involves two <code>Unit Files</code> (in Nix) that run consecutively after the iPod is connected to the server (where my music is stored). The device gets mounted automatically, and then a script runs that syncs both the music and the playlists.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>  systemd<span style="color:#f92672">.</span>services<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;ipod&#34;</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Sync files from iPod when mounted&#34;</span>;
</span></span><span style="display:flex;"><span>    wantedBy <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&#34;mnt-ipod.mount&#34;</span> ]; 
</span></span><span style="display:flex;"><span>    after <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&#34;mnt-ipod.mount&#34;</span> ];
</span></span><span style="display:flex;"><span>    serviceConfig <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>      Type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;oneshot&#34;</span>;
</span></span><span style="display:flex;"><span>      ExecStart <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;/home/canus/scripts/nixos/sync-ipod.sh&#39;&#39;</span>;
</span></span><span style="display:flex;"><span>      User <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;contre&#34;</span>;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Mount unit for the iPod</span>
</span></span><span style="display:flex;"><span>  systemd<span style="color:#f92672">.</span>mounts <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      what <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/dev/disk/by-uuid/8734-1678&#34;</span>;
</span></span><span style="display:flex;"><span>      where <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/mnt/ipod&#34;</span>;
</span></span><span style="display:flex;"><span>      type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;vfat&#34;</span>;
</span></span><span style="display:flex;"><span>      options <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nofail,x-systemd.automount,uid=1000,gid=100&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ];
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/run/current-system/sw/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># Capture rsync output (stdout + stderr) and preserve line breaks</span>
</span></span><span style="display:flex;"><span>CONVERT<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Needed for special characters in FAT32 file systems </span>
</span></span><span style="display:flex;"><span>  /home/contre/.nix-profile/bin/convmv -r -f utf-8 -t utf-8 --nfc --notest /mnt/HDD2/music/ 2&gt;&amp;<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>RSYNC<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>
</span></span><span style="display:flex;"><span>  /home/contre/.nix-profile/bin/rsync -avr --ignore-existing --include<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;*&#39;</span> --stats --exclude<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;*.lrc&#39;</span> /mnt/HDD2/music/ /mnt/ipod/Music/ 2&gt;&amp;<span style="color:#ae81ff">1</span> |
</span></span><span style="display:flex;"><span>  sed <span style="color:#e6db74">&#39;0,/^$/d&#39;</span> | grep -e <span style="color:#e6db74">&#34;Number of&#34;</span> -e <span style="color:#e6db74">&#34;File list size&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>/home/contre/.nix-profile/bin/rsync -av --inplace --info<span style="color:#f92672">=</span>progress2 /mnt/SSD/config/emby/data/userplaylists/ /mnt/ipod/Playlists 2&gt;&amp;<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Send via curl using --data-urlencode to preserve formatting</span>
</span></span><span style="display:flex;"><span>/run/current-system/sw/bin/curl -s -X POST --data <span style="color:#e6db74">&#34;iPod Sync ✅ --- </span>$CONVERT<span style="color:#e6db74"> - </span>$RSYNC<span style="color:#e6db74">&#34;</span> https://ntfy.server.home/all
</span></span></code></pre></div><p>Once the sync is done, I get a notification. It usually doesn’t take more than 5 seconds, depending on how much music was downloaded since last sync. For playlists, I build them in Symfonium and sync them with Emby. That way, when the script runs, it pulls the latest version of the playlists from there. So, I have playlists and music synced across Emby (Web and TV), iPod (Offline), and my phone (Symfonium). The common format they use is <code>.m3u</code>, which is basically just a list of file paths.</p>
<p>Even if all this sounds a bit anachronistic, I don’t mean for it to come off as some rebellious act against mainstream music consumption. It&rsquo;s more about my belief thats there’s value in collecting, organizing, and preserving. These are acts tied to personal and cognitive sovereignty, acts you can’t easily detach from if you intend to hold on to it. No matter the field, it’s a necessary and inevitable practice: a fight that, thanks to the work of many, you now get to choose—whether to take it on, or let it go. I have personally decided to fight it in an essential common field for all humans: music.</p>
<h2 id="whats-next">What’s next?</h2>
<p>I’ve been using this flow for a few months now and honestly, I can’t complain. It works really well. My next goal would be to get into RED, but the interview <a href="https://interviewfor.red/en/index.html">feels pretty tedious</a>. I’d really like to know if it’s worth it. I’m discovering a lot of music that’s unavailable in good quality and missing from mainstream streaming platforms like Spotify or Deezer. Everything points to vinyl being the source for a lot of it.</p>
<p>I’d also like to set up <a href="https://github.com/kieraneglin/pinchflat">Pinchflat</a> to download music from YouTube. The issue is properly cataloging mixes on continuous videos, and without the ability to download lossless audio, I’m not sure it’s really worth the effort. I’d also love to implement something like <a href="https://support.plex.tv/articles/sonic-analysis-music/">Sonic Analysis</a> to create playlists. So far, the only platform I’ve seen that supports it is Plex, and I haven’t found a real alternative. Symfonium has a feature that integrates really well, but you must use Plex as the backend. Finally, I’d like a tool that recommends tracks to add to an existing playlist.</p>
<p>There’s a ton of stuff I’ve found and explored that didn’t fit into this blog post. But here are a few links that might come in handy if you’re into this kind of thing.</p>
<ul>
<li><a href="https://bandcamp.com/">https://bandcamp.com/</a></li>
<li><a href="https://www.discogs.com/">https://www.discogs.com/</a></li>
<li><a href="https://musicbrainz.org/">https://musicbrainz.org/</a></li>
<li><a href="https://www.albumoftheyear.org">https://www.albumoftheyear.org</a></li>
<li><a href="https://github.com/krateng/maloja">https://github.com/krateng/maloja</a></li>
<li><a href="https://www.last.fm/">https://www.last.fm/</a></li>
<li><a href="https://www.deezer.com/us/offers">https://www.deezer.com/</a></li>
<li><a href="https://dee-mix.one/en/download/">https://dee-mix.one/en/download/</a></li>
<li><a href="https://github.com/acoustid/chromaprint/">https://github.com/acoustid/chromaprint/</a></li>
<li><a href="https://beets.io">https://beets.io</a></li>
<li><a href="https://fanart.tv/">https://fanart.tv/</a></li>
<li><a href="https://github.com/florib779/beets-config/blob/master/config.yaml">https://github.com/florib779/beets-config/blob/master/config.yaml</a></li>
<li><a href="https://www.reddit.com/r/DigitalAudioPlayer/">https://www.reddit.com/r/DigitalAudioPlayer/</a></li>
<li><a href="https://www.reddit.com/r/musichoarder/">https://www.reddit.com/r/musichoarder/</a></li>
<li><a href="https://www.reddit.com/r/audiophile/">https://www.reddit.com/r/audiophile/</a></li>
<li><a href="https://www.reddit.com/r/LetsTalkMusic/">https://www.reddit.com/r/LetsTalkMusic/</a></li>
<li><a href="https://www.reddit.com/r/Beatmatch/">https://www.reddit.com/r/Beatmatch/</a></li>
<li><a href="https://support.plex.tv/articles/sonic-analysis-music/">https://support.plex.tv/articles/sonic-analysis-music/</a></li>
<li><a href="https://rateyourmusic.com">https://rateyourmusic.com</a></li>
<li><a href="https://www.metal-archives.com/">https://www.metal-archives.com/</a></li>
<li><a href="https://suno.com/explore/">https://suno.com/explore/</a></li>
<li><a href="https://bndcmpr.co/">https://bndcmpr.co/</a></li>
</ul>
</div>
  </article>
<script defer src="https://comment.contre.io/js/commento.js"></script>
<div id="commento"></div>
</main>

    </div>
    <footer>
  <hr />
  
</footer>

  </body>
</html>
